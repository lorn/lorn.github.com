<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: fisl | lornlab.]]></title>
  <link href="http://lornlab.org/blog/categories/fisl/atom.xml" rel="self"/>
  <link href="http://lornlab.org/"/>
  <updated>2012-06-29T15:28:12-03:00</updated>
  <id>http://lornlab.org/</id>
  <author>
    <name><![CDATA[Lindolfo 'Lorn' Rodrigues]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Perl Para Sysadmins E DBAs]]></title>
    <link href="http://lornlab.org/blog/2009/01/20/perl-para-sysadmins-e-dbas/"/>
    <updated>2009-01-20T15:08:00-02:00</updated>
    <id>http://lornlab.org/blog/2009/01/20/perl-para-sysadmins-e-dbas</id>
    <content type="html"><![CDATA[<p>Rau!</p>

<p>Depois de séculos sem posts, apenas um post para linkar para o material da minha palestra no fisl ( que não foi das melhores porque não terminei a palestra antes e fiquei BEM doente em POA :/ )</p>

<p><a href="http://lornlab.org/palestra_fisl">http://lornlab.org/palestra_fisl/</a></p>

<p>Agradecimentos para o Claudemir Ivan, que disse que não estava conseguindo acessar os arquivos.</p>

<p>Falow, algum dia meu blog em Catalyst sai</p>

<p>Update: O problema era que o Dreamhost estava interpretando os .pl :/ coloquei as extensões em .txt e tudo</p>

<p>funcionou.</p>

<p>Update 2: Agora com o plugin de gist do github.com o código fica bonito e indentado</p>

<p>Update 3: Agora quem trata o gist é o octopress \,,/</p>

<p><div><script src='https://gist.github.com/760136.js?file='></script>
<noscript><pre><code>#!/usr/bin/perl

=head1 NAME

    conta_acessos 
    
=head1 DESCRIPTION

=head1 AUTHOR

    Renan Rangel &lt;rvr777 at gmail dot com&gt;
    Lorn &lt;lorn at lornlab dot org&gt;

=head1 COPYRIGHT 

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
    
=cut

use strict;
use Data::Dumper;

die &lt;DATA&gt;
  unless scalar @ARGV;
  
our $VERSION = '0.1';

my ($c, @p, %option) = 0;
my %hash_count = ();
# look for options and patterns
my $ip = 0;
foreach (@ARGV) {
  if (/^-(.+)$/) {
      my $arg = $1;
    if($arg eq 'ip'){
        $ip = 1;
    }elsif ($arg eq 'h'){
        do { 
            print &lt;DATA&gt;;
            exit(0);
        };
    }elsif ($arg eq 'i'){
        do {
            $option{i} = 1;
            next;
        };
    }elsif ($arg eq 'v'){
        do {
            print &quot;conta_acessos $VERSION\nAuthor: Renan Rangel &lt;rvr777\@gmail.com&gt;\n        Lorn &lt;lorn.br\@gmail.com.br&gt;\n&quot;;
            exit(0)
        };
    }else{
        die &lt;DATA&gt;;
    }
  }else{
      die &lt;DATA&gt;;
  }
}

# search and replace the pattern with the colored text
my $found = 0;
while (my $line = &lt;STDIN&gt;) {
    my ($ip) = split(/\s/,$line);
    $hash_count{$ip} = $hash_count{$ip} + 1;
}

print Dumper \%hash_count;    
foreach my $line ( sort { $hash_count{$b} &lt;=&gt; $hash_count{$a} } keys
%hash_count) {
    my $acessos = $hash_count{$line};
    print &quot;ip: $line\tacessos:\t$acessos\n&quot;;
}

exit(0);

__DATA__
Usage: 
  tail -1000 /var/log/apache2/access.log | perl conta_acessos.pl -ip 
  
Options:
  -h = Print help message
  -i = Case insensitive
  -v = Show version</code></pre></noscript></div>
</p>

<iframe scrolling="no" marginheight="0" marginwidth="0" frameborder="0" height="355" width="425" src="http://www.slideshare.net/slideshow/embed_code/7618654"></iframe>


<p><a href="http://www.slideshare.net/lornlab/perl-sysadmin-dba-7618654">Link slideshare</a></p>
]]></content>
  </entry>
  
</feed>
